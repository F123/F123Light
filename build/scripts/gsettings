#!/bin/bash
# Gsettings commands to enable desktop accessibility and the Orca screen reader

# die if this script is called with no argument.
if [ -z $1 ]; then
	echo No root specified
	exit 1
fi

# Die if called with more than one argument
if [ $2 ]; then
	echo Too many arguments
	exit 1
fi

newroot=$1

# turn on MATE accessibility
arch-chroot "${newroot}" sudo -u \#1000 gsettings set org.mate.interface accessibility true"
# Make Orca start automatically
arch-chroot "${newroot}" sudo -u \#1000 gsettings set org.gnome.desktop.a11y.applications screen-reader-enabled true"
# Disable screen locking by default
arch-chroot "$newroot" sudo -u \#1000 gsettings set org.mate.screensaver lock-enabled false
# Set the MATE desktop background
# Hard code it for now, for testing purposes, but it is to be a config option if it works.
arch-chroot "$newroot" sudo -u \#1000 gsettings set org.mate.background picture-filename /usr/share/backgrounds/mate/F123/logo.png
