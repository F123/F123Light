#!/bin/bash
# Gsettings commands to enable desktop accessibility and the Orca screen reader

# die if this script is called with no argument.
if [ -z $1 ]; then
	echo No root specified
	exit 1
fi

# Die if called with more than one argument
if [ $2 ]; then
	echo Too many arguments
	exit 1
fi

newroot=$1

# turn on MATE accessibility
arch-chroot "${newroot}" sudo -u \#1000 gsettings set org.mate.interface accessibility true"
# The most recent dbus-daemon, started by dbus-launch above, must be killed in order to unmount the image root partition.
#pkill -n dbus-daemon
# Make Orca start automatically
arch-chroot "${newroot}" sudo -u \#1000 gsettings set org.gnome.desktop.a11y.applications screen-reader-enabled true"
# Kill the most recent dbus-daemon again
#pkill -n dbus-daemon
